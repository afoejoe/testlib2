{"version":3,"file":"index.es.js","sources":["../src/SwitchBase.tsx","../../../node_modules/style-inject/dist/style-inject.es.js","../src/BaseTabs.js","../src/LMS.js","../src/checkBordersUtils.ts","../src/ClickDetector.ts","../src/escape-modal-close.js","../src/z-index-service.ts","../src/use-event.ts"],"sourcesContent":["import React, { ChangeEventHandler, MouseEventHandler } from 'react';\r\nimport classNames from 'classnames';\r\nimport IExtra from '../interfaces/extra';\r\nimport ISpread from '../interfaces/spread';\r\nimport IExtendClassProps from '../interfaces/extend-class-props';\r\nimport { CSSObject } from '../types';\r\n\r\nexport interface ISwitchBaseProps extends IExtra, ISpread, IExtendClassProps {\r\n  styles: CSSObject;\r\n  inputType: string;\r\n  /**\r\n   * Кастомный инлайн-стиль\r\n   */\r\n  customClasses: string;\r\n  disabled?: boolean;\r\n  name?: number | string;\r\n  checked?: boolean;\r\n  defaultChecked?: boolean;\r\n  value?: string;\r\n  indeterminate?: boolean;\r\n  getIcon?: (checked?: boolean, indeterminate?: boolean) => void;\r\n  onChange?: ChangeEventHandler<HTMLInputElement>;\r\n  onClick?: MouseEventHandler<HTMLLabelElement>;\r\n}\r\n\r\n/**\r\n * Поле выбора\r\n */\r\nconst SwitchBase: React.FC<ISwitchBaseProps> = props => {\r\n  const {\r\n    name,\r\n    checked,\r\n    defaultChecked,\r\n    styles,\r\n    inputType,\r\n    disabled,\r\n    customClasses,\r\n    value,\r\n    onChange,\r\n    onClick,\r\n    getIcon,\r\n    indeterminate,\r\n    children,\r\n    className,\r\n    style,\r\n    extra,\r\n    ...other\r\n  } = props;\r\n\r\n  const controlled = checked !== undefined;\r\n\r\n  const ref = React.useRef<HTMLInputElement | null>(null);\r\n  const [internalChecked, setChecked] = React.useState<boolean | undefined>();\r\n\r\n  React.useEffect(() => {\r\n    if (!controlled) {\r\n      setChecked(defaultChecked);\r\n    }\r\n  }, [controlled]);\r\n\r\n  const onKeyPress = (event: any) => {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n    ref?.current?.click();\r\n  };\r\n\r\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (!controlled) {\r\n      setChecked(event.target.checked);\r\n    }\r\n\r\n    onChange?.(event);\r\n  };\r\n\r\n  const calcChecked = controlled ? checked : internalChecked;\r\n\r\n  const labelClassName = classNames(customClasses, {\r\n    [styles.disabled]: disabled,\r\n    [styles.checked]: calcChecked || indeterminate,\r\n    [String(className)]: className,\r\n  });\r\n\r\n  const icon = getIcon && getIcon(calcChecked, indeterminate);\r\n\r\n  /* eslint-disable */\r\n  return (\r\n    <label\r\n      className={labelClassName}\r\n      style={style}\r\n      role=\"button\"\r\n      tabIndex={disabled ? -1 : 0}\r\n      onKeyPress={onKeyPress}\r\n      onClick={onClick}\r\n      {...extra}\r\n    >\r\n      <input\r\n        disabled={disabled}\r\n        value={value}\r\n        checked={calcChecked}\r\n        name={name ? String(name) : undefined}\r\n        type={inputType}\r\n        className={styles.input}\r\n        onChange={handleChange}\r\n        tabIndex={disabled ? -1 : 0}\r\n        onClick={e => e.stopPropagation()}\r\n        ref={ref}\r\n        {...other}\r\n      />\r\n      {icon}\r\n      {children}\r\n    </label>\r\n  );\r\n};\r\n\r\nexport default SwitchBase;\r\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport deepEqual from 'deep-equal';\r\nimport nanoid from 'nanoid';\r\n\r\nimport styles from './base-tabs.module.scss';\r\n\r\nconst defaultTabComponentWrapper = ({ titlesClassName, children }) => {\r\n  const titleClasses = classNames(styles.baseTabsTitles, {\r\n    [Array.isArray(titlesClassName) ? titlesClassName.join(' ') : titlesClassName]:\r\n      titlesClassName && titlesClassName.length,\r\n  });\r\n\r\n  return <div className={titleClasses}>{children}</div>;\r\n};\r\n\r\ndefaultTabComponentWrapper.propTypes = {\r\n  /**\r\n   * Классы для контейнера тайлов\r\n   */\r\n  titlesClassName: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\r\n};\r\n\r\nclass BaseTabs extends React.Component {\r\n  state = {\r\n    activeTabIndex: this.props.activeTabIndex,\r\n    data: this.props.data,\r\n    uuidMemo: [],\r\n  };\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    if (!deepEqual(nextProps.data, prevState.data) || prevState.uuidMemo.length === 0) {\r\n      const { data } = nextProps;\r\n      return {\r\n        data,\r\n        uuidMemo: Array(data.length)\r\n          .fill(0)\r\n          .map(() => nanoid()),\r\n      };\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  onTabTitleClick = idx => () => {\r\n    const { onTabClick } = this.props;\r\n    this.setState({ activeTabIndex: idx });\r\n    onTabClick(idx);\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      tabComponent: TabComponent,\r\n      tabComponentWrapper: TabComponentWrapper = defaultTabComponentWrapper,\r\n      tabProps,\r\n      activeProp,\r\n      data,\r\n      contentField,\r\n      titleField,\r\n      titlesClassName,\r\n      contentClassName,\r\n      isWrapContent,\r\n      extra,\r\n    } = this.props;\r\n    const { activeTabIndex, uuidMemo } = this.state;\r\n\r\n    const tabTitles = data.map((item, idx) => (\r\n      <TabComponent\r\n        key={uuidMemo[idx]}\r\n        onClick={this.onTabTitleClick(idx)}\r\n        {...{ [activeProp]: idx === activeTabIndex }}\r\n        {...tabProps}\r\n      >\r\n        {item[titleField]}\r\n      </TabComponent>\r\n    ));\r\n\r\n    const isActiveTab = data[activeTabIndex] && data[activeTabIndex][contentField];\r\n\r\n    const wrapContent = content =>\r\n      isActiveTab && isWrapContent ? <div className={contentClassName}>{content}</div> : content;\r\n\r\n    return (\r\n      <>\r\n        <TabComponentWrapper titlesClassName={titlesClassName} extra={extra}>\r\n          {tabTitles}\r\n        </TabComponentWrapper>\r\n        {wrapContent(data[activeTabIndex][contentField])}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nBaseTabs.defaultProps = {\r\n  activeProp: 'isActive',\r\n  activeTabIndex: 0,\r\n  contentField: 'content',\r\n  titleField: 'title',\r\n  onTabClick: () => {},\r\n  isWrapContent: true,\r\n  data: [],\r\n};\r\n\r\nBaseTabs.propTypes = {\r\n  /**\r\n   * Имя пропса, в которое передаётся активность таба\r\n   */\r\n  activeProp: PropTypes.string,\r\n  /**\r\n   * Индекс активного таба\r\n   */\r\n  activeTabIndex: PropTypes.number,\r\n  /**\r\n   * Классы для контейнера тайлов\r\n   */\r\n  titlesClassName: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\r\n  /**\r\n   * Класс для контейнера контента\r\n   */\r\n  contentClassName: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\r\n  /**\r\n   * Массив с данными\r\n   */\r\n  data: PropTypes.arrayOf(PropTypes.any),\r\n  /**\r\n   * Компонент для отображения таба\r\n   */\r\n  tabComponent: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\r\n  /**\r\n   * Компонент, в который будут обёрнуты все табы\r\n   */\r\n  tabComponentWrapper: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\r\n  /**\r\n   * Пропсы, которые прокидываются в компонент таба\r\n   */\r\n  tabProps: PropTypes.object, // eslint-disable-line react/forbid-prop-types\r\n  /**\r\n   * Имя поля в объекте, из которого берутся данные для тайтла табов\r\n   */\r\n  titleField: PropTypes.string,\r\n  /**\r\n   * Имя поля в объекте, из которого берутся данные для контента\r\n   */\r\n  contentField: PropTypes.string,\r\n  /**\r\n   * Коллбек по клику на таб. Принимает индекс таба, по которому был произведён клик\r\n   */\r\n  onTabClick: PropTypes.func,\r\n  /**\r\n   * Оборачивать или нет контент таба в дополнительный div\r\n   */\r\n  isWrapContent: PropTypes.bool,\r\n  /**\r\n   * Произвольные атрибуты\r\n   */\r\n  extra: PropTypes.object, // eslint-disable-line react/forbid-prop-types\r\n};\r\n\r\nexport default BaseTabs;\r\n","import PropTypes from 'prop-types';\r\n\r\nexport default PropTypes.oneOf(['large', 'medium', 'small', 'xsmall']);\r\n","export const ANCHORS = {\r\n  // common\r\n  CENTER: 'center',\r\n  // vertical\r\n  TOP: 'top',\r\n  BOTTOM: 'bottom',\r\n  // horizontal\r\n  LEFT: 'left',\r\n  RIGHT: 'right',\r\n};\r\n\r\nexport const checkVertical = (originValue: number, height: number, vertical: string, isModal: boolean) => {\r\n  const sign = isModal ? -1 : 1;\r\n\r\n  switch (vertical) {\r\n    case ANCHORS.TOP:\r\n      return originValue;\r\n    case ANCHORS.CENTER:\r\n      return originValue + Math.round(height / 2) * sign;\r\n    case ANCHORS.BOTTOM:\r\n      return originValue + Math.round(height) * sign;\r\n    default:\r\n      return originValue;\r\n  }\r\n};\r\n\r\nexport const checkHorizontal = (originValue: number, width: number, horizontal: string, isModal: boolean) => {\r\n  const sign = isModal ? -1 : 1;\r\n\r\n  switch (horizontal) {\r\n    case ANCHORS.LEFT:\r\n      return originValue;\r\n    case ANCHORS.CENTER:\r\n      return originValue + Math.round(width / 2) * sign;\r\n    case ANCHORS.RIGHT:\r\n      return originValue + Math.round(width) * sign;\r\n    default:\r\n      return originValue;\r\n  }\r\n};\r\n\r\ntype BorderParamsPositionType = { top: number; left: number };\r\ninterface ICheckBordersParams {\r\n  position?: BorderParamsPositionType;\r\n  /**\r\n   * при использовании внутри DropdownSelect берутся размеры рутового элемента. Во всех остальных случаях\r\n   * это размеры всплывающего контента\r\n   */\r\n  sizes: { height: number; width: number };\r\n  padding: number;\r\n  offset?: { x: number; y: number };\r\n}\r\n\r\n/**\r\n * Метод проверяет, помещается ли всплывающее окно в window. Если не помещается, то координаты сдвигаются так, чтобы был\r\n * отступ между краем экрана и всплываюшим контентом.\r\n */\r\nexport const checkBorders = (params: ICheckBordersParams) => {\r\n  const { position, offset, padding, sizes } = params;\r\n  const newPosition = Object.assign({}, position);\r\n\r\n  const { innerWidth, innerHeight } = window;\r\n\r\n  if (newPosition.top < padding) {\r\n    newPosition.top = padding;\r\n  }\r\n\r\n  if (newPosition.top + sizes.height > innerHeight) {\r\n    newPosition.top = innerHeight - (sizes.height + padding);\r\n  }\r\n\r\n  if (newPosition.left < padding) {\r\n    newPosition.left = padding;\r\n  }\r\n\r\n  if (newPosition.left + sizes.width > innerWidth) {\r\n    newPosition.left = innerWidth - (sizes.width + padding);\r\n  }\r\n\r\n  if (offset) {\r\n    newPosition.top += offset.y;\r\n    newPosition.left += offset.x;\r\n  }\r\n\r\n  return newPosition;\r\n};\r\n\r\ntype PositionType = {\r\n  top: number;\r\n  left: number;\r\n};\r\n\r\ninterface ICheckPositionPriorityParams {\r\n  position: PositionType;\r\n  sizes: { width: number; height: number };\r\n  padding: any;\r\n}\r\nexport const checkPositionPriority = (params: ICheckPositionPriorityParams) => {\r\n  const { position, sizes, padding } = params;\r\n  const { innerWidth, innerHeight } = window;\r\n\r\n  return {\r\n    right: position.left + sizes.width < innerWidth,\r\n    top: position.top > padding,\r\n    left: position.left > padding,\r\n    bottom: position.top + sizes.height < innerHeight,\r\n  };\r\n};\r\n\r\nconst checkBordersUtils = {\r\n  ANCHORS,\r\n  checkVertical,\r\n  checkHorizontal,\r\n  checkBorders,\r\n  checkPositionPriority,\r\n};\r\n\r\nexport default checkBordersUtils;\r\n","import { MouseEvent as ReactMouseEvent } from 'react';\r\n\r\nexport type Callback = (event: ReactMouseEvent) => void;\r\n\r\nclass ClickDetector {\r\n  clickedElement: Node | null = null;\r\n  composedPath: Node[] = [];\r\n  clickCallbackCollection = new Set<Callback>();\r\n\r\n  constructor() {\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n      document.addEventListener('click', this.clickListener);\r\n    });\r\n  }\r\n\r\n  removeClickListener = () => {\r\n    document.removeEventListener('click', this.clickListener);\r\n  };\r\n\r\n  clickListener = (event: MouseEvent) => {\r\n    this.composedPath = event.composedPath() as Node[];\r\n\r\n    this.clickedElement = event.target as Node;\r\n    /**\r\n     * изначально в интерфейсах DropDown шла завязка React.MouseEvent,\r\n     * а в addEventListener и removeEventListener нам нужен DOM MouseEvent\r\n     * тут происходит конвертация типа MouseEvent в React.MouseEvent\r\n     * @todo:\r\n     * подумать как сделать более человечно\r\n     */\r\n    this.clickCallbackCollection.forEach(cb => cb(event as unknown as ReactMouseEvent));\r\n  };\r\n\r\n  getLastClickedElement = () => {\r\n    return this.clickedElement;\r\n  };\r\n\r\n  isElemContainClick = (domElement: Node | null) => {\r\n    if (!domElement) {\r\n      return false;\r\n    }\r\n\r\n    return (\r\n      domElement.contains(this.clickedElement) ||\r\n      this.composedPath.some(item => {\r\n        if (item.nodeType === Node.ELEMENT_NODE) {\r\n          return domElement.contains(item as Node);\r\n        }\r\n        return false;\r\n      })\r\n    );\r\n  };\r\n\r\n  isClickContainElem = (domElement: Node | null) => {\r\n    return domElement && (this.clickedElement as Node).contains(domElement);\r\n  };\r\n\r\n  addClickCallback = (callback: Callback) => {\r\n    this.clickCallbackCollection.add(callback);\r\n  };\r\n\r\n  removeClickCallback = (callback: Callback) => {\r\n    this.clickCallbackCollection.delete(callback);\r\n  };\r\n}\r\n\r\nconst clickDetectorInstance = new ClickDetector();\r\n\r\nexport default clickDetectorInstance;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default Component => {\r\n  return class extends React.Component {\r\n    static propTypes = {\r\n      /**\r\n       * Опциональное закрытие модальных компонентов по Esc\r\n       */\r\n      isCloseByEsc: PropTypes.bool,\r\n    };\r\n\r\n    componentDidMount() {\r\n      document.addEventListener('keydown', this.onKeyPressListener, false);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      document.removeEventListener('keydown', this.onKeyPressListener, false);\r\n    }\r\n\r\n    createRef = ref => {\r\n      if (ref) {\r\n        this.ref = ref;\r\n      }\r\n    };\r\n\r\n    onKeyPressListener = event => {\r\n      const { isCloseByEsc = true } = this.props;\r\n\r\n      if (!isCloseByEsc) {\r\n        return;\r\n      }\r\n\r\n      if (event.which === 27) {\r\n        if (this.ref && this.ref.onCloseModalComponent) {\r\n          this.ref.onCloseModalComponent();\r\n        }\r\n      }\r\n    };\r\n\r\n    render() {\r\n      const { ...props } = this.props;\r\n      return <Component ref={this.createRef} {...props} />;\r\n    }\r\n  };\r\n};\r\n","export interface IZIndexService {\n  componentStore: Map<any, number>;\n  addToComponentStore(component: any): number;\n  removeToComponentStore(component: any): void;\n  getMaxIndex(): number;\n}\n\n/**\n * Компонент-сервис для рассчета максимального zIndex модальных компонентов в определённый момент времени.\n * Необходим для решения задачи по корректному отображению модальных компонентов, монтированных через порталы.\n * Синглтон.\n *\n * Принцип работы.\n * Компонент работает по принципу хранилища. Момент рассчета корректного zIndex в разных компонентах может быть\n * вызван разными триггерами. Поэтому как только необходимо вычислить положение, компонент, использующий сервис\n * должен вызвать метод addToComponentStore, который добавит dom-элемент в стор и вернёт корректный максимальный zIndex.\n *\n * Обязательно!\n * Для корректной работы сервиса в момент скрытия модального элемента необходимо удалять dom-элемент из стора.\n *\n * Слава ссылочной целостности!\n */\nclass ZIndexService implements IZIndexService {\n  componentStore = new Map();\n\n  /**\n   * Добавление компонента в стор\n   * @param component\n   * @returns {*}\n   */\n  addToComponentStore = (component: HTMLElement) => {\n    if (this.componentStore.get(component)) {\n      return undefined;\n    }\n\n    const newMaxIndex = this.getMaxIndex() + 10;\n\n    this.componentStore.set(component, newMaxIndex);\n\n    return newMaxIndex;\n  };\n\n  /**\n   * Удаление компонента из стора\n   * @param component\n   */\n  removeToComponentStore = (component: HTMLElement) => {\n    if (this.componentStore.has(component)) {\n      this.componentStore.delete(component);\n    }\n  };\n\n  /**\n   * Метод возвращается максимальное значение zIndex в хранилище\n   * @returns {number|T}\n   */\n  getMaxIndex = () => {\n    if (this.componentStore.size) {\n      return Array.from(this.componentStore.values()).sort().reverse()[0];\n    }\n    return 99;\n  };\n}\n\nexport default new ZIndexService();\n","import React from 'react';\r\n\r\n/**\r\n * https://github.com/reactjs/rfcs/blob/useevent/text/0000-useevent.md\r\n */\r\nexport type Callback = (...args: any[]) => unknown;\r\nexport const useEvent = <T extends Callback = Callback>(callback: T): T => {\r\n  const callbackRef = React.useRef<T>(callback);\r\n  callbackRef.current = callback;\r\n\r\n  const fn = ((...args) => callbackRef.current(...args)) as T;\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  return React.useCallback<T>(fn, []);\r\n};\r\n"],"names":["SwitchBase","props","name","checked","defaultChecked","styles","inputType","disabled","customClasses","value","onChange","onClick","getIcon","indeterminate","children","className","style","extra","other","_objectWithoutProperties","_excluded","controlled","undefined","ref","React","useRef","_React$useState","useState","_React$useState2","_slicedToArray","internalChecked","setChecked","useEffect","onKeyPress","event","_ref$current","stopPropagation","preventDefault","current","click","handleChange","target","calcChecked","labelClassName","classNames","_defineProperty","String","icon","createElement","_extends","role","tabIndex","type","input","e","styleInject","css","insertAt","document","head","getElementsByTagName","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","defaultTabComponentWrapper","_ref","titlesClassName","titleClasses","baseTabsTitles","Array","isArray","join","length","propTypes","PropTypes","oneOfType","string","arrayOf","BaseTabs","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","args","_key","call","apply","concat","_assertThisInitialized","activeTabIndex","data","uuidMemo","idx","onTabClick","setState","_createClass","key","render","_this2","_this$props","TabComponent","tabComponent","_this$props$tabCompon","tabComponentWrapper","TabComponentWrapper","tabProps","activeProp","contentField","titleField","contentClassName","isWrapContent","_this$state","state","tabTitles","map","item","onTabTitleClick","isActiveTab","wrapContent","content","Fragment","getDerivedStateFromProps","nextProps","prevState","deepEqual","fill","nanoid","Component","defaultProps","number","any","element","func","object","bool","oneOf","ANCHORS","CENTER","TOP","BOTTOM","LEFT","RIGHT","checkVertical","originValue","height","vertical","isModal","sign","Math","round","checkHorizontal","width","horizontal","checkBorders","params","position","offset","padding","sizes","newPosition","Object","assign","_window","window","innerWidth","innerHeight","top","left","y","x","checkPositionPriority","_window2","right","bottom","checkBordersUtils","ClickDetector","Set","removeEventListener","clickListener","composedPath","clickedElement","clickCallbackCollection","forEach","cb","domElement","contains","some","nodeType","Node","ELEMENT_NODE","callback","add","addEventListener","clickDetectorInstance","_class","_this$props$isCloseBy","isCloseByEsc","which","onCloseModalComponent","componentDidMount","onKeyPressListener","componentWillUnmount","_objectDestructuringEmpty","createRef","ZIndexService","Map","component","componentStore","get","newMaxIndex","getMaxIndex","set","has","size","from","values","sort","reverse","useEvent","callbackRef","fn","useCallback"],"mappings":"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"}